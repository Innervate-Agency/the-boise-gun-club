import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Code Guidelines" />

# Code Guidelines: Technical Standards

This document defines the technical standards and development practices for the Boise Gun Club v4 project. These guidelines ensure consistency, maintainability, and quality across the codebase.

## 1. Core Philosophy

1. **Component-Driven:** Our UI is built from a hierarchy of reusable components. Pages are compositions of these components, not monolithic blocks of code.
2. **Convention Over Configuration:** We follow established patterns and conventions to minimize boilerplate and cognitive overhead.
3. **Single Responsibility:** Each component, hook, or utility has a single, well-defined purpose.
4. **Strictness and Clarity:** We use TypeScript's strict mode and explicit typing to catch errors early and make our code self-documenting.

## 2. Project & Component Architecture

We use a feature-based architecture within the Next.js App Router.

### 2.1. Directory Structure

- `src/app/`: Contains all routes and pages. The `page.tsx` file for any given route should be lean, focusing only on fetching data and composing components.
- `src/components/ui/`: "Dumb" UI primitives that are globally reusable (e.g., `Button`, `Input`, `Card`). These should be highly generic and styleable.
- `src/components/common/`: More complex components that are used across multiple features (e.g., `SiteHeader`, `PageTitle`).
- `src/components/{feature-name}/`: Components that are specific to a single feature or page (e.g., `src/components/membership/MembershipCard`).
- `src/lib/`: Utility functions, API helpers, and other shared logic.
- `src/hooks/`: Custom hooks that encapsulate reusable logic.
- `src/types/`: Global TypeScript type definitions and interfaces.

### 2.2. Page Composition: The Gold Standard

The `page.tsx` file should do as little as possible. Its primary role is to assemble the UI by importing and arranging the necessary components. Logic, state, and complex JSX should be encapsulated within those components.

**Example (`src/app/about/page.tsx`):**

```tsx
// GOOD: A clean, declarative page composition
import { AboutHero } from '@/components/about/AboutHero';
import { OurHistory } from '@/components/about/OurHistory';
import { BoardOfDirectors } from '@/components/about/BoardOfDirectors';

export default function AboutPage() {
  return (
    <main>
      <AboutHero />
      <OurHistory />
      <BoardOfDirectors />
    </main>
  );
}
```

### 2.3. Server vs. Client Components

- **Default to Server Components:** All components are Server Components by default. Use them for fetching data and accessing server-side resources.
- **Opt-in to Client Components:** Only use Client Components when you need interactivity (e.g., `onClick`, `useState`, `useEffect`). Add `"use client";` to the top of the file to make it a Client Component.
- **Isolate Interactivity:** Keep Client Components as small as possible. Create specific interactive components rather than making an entire page a client component.

## 3. Styling with Tailwind CSS v4

We use Tailwind CSS v4's CSS-first configuration. All styling rules are defined in `src/app/globals.css`.

### 3.1. Design Tokens & Theming

**There are no hardcoded hex codes.** All colors, fonts, and other design tokens must be defined as CSS variables under the `@theme` directive.

**Example (`src/app/globals.css`):**

```css
@import "tailwindcss";

@theme {
  --color-primary: #F2CB05; /* Leonard Yellow */
  --color-secondary: #0A0A0A; /* Rich Black */
  --color-text-light: #FFFFFF;
  --color-text-dark: #0A0A0A;

  --font-heading: "Rajdhani", sans-serif;
  --font-body: "Noto Sans", sans-serif;
  --font-serif: "Noto Serif", serif;
}
```

### 3.2. Light & Dark Mode

We use a selector-based strategy for dark mode. The `dark` class on the `<html>` element activates it. All components must support both modes.

- **Define Dark Mode Variants:** Use the `@custom-variant` rule to define the dark mode selector.
- **Use CSS Variables:** Define dark mode colors in a `[data-theme='dark']` selector.
- **Apply in Components:** Use Tailwind's `dark:` prefix to apply dark mode styles.

### 3.3. Tailwind v4 Modern Syntax (2025 Standard)

**CRITICAL: Always use the v4 shorthand syntax for CSS custom properties:**

```tsx
// ✅ CORRECT: v4 Modern Syntax
<div className="bg-(--color-leonard-yellow)">
<div className="border-(--color-leonard-yellow)/30">
<div className="text-(--color-lahoma-orange)">

// ✅ With opacity modifiers
<div className="bg-(--color-leonard-yellow)/20">
<div className="border-(--color-lahoma-orange)/50">

// ❌ FORBIDDEN: Old v3 Syntax
<div className="bg-[--color-leonard-yellow]">
<div className="bg-color-leonard-yellow">
```

### 3.4. Forbidden Practices

1. **NO Hardcoded Colors/Styles:** Do not use `text-[#FFF]`, `border-[#F2CB05]`, etc. Use CSS variables with v4 syntax: `bg-(--color-leonard-yellow)`
2. **NO Old v3 Syntax:** Do not use `bg-[--color-leonard-yellow]` or `bg-color-leonard-yellow`. Use `bg-(--color-leonard-yellow)`
3. **NO Raw HTML Elements:** Do not use `<button>`, `<a>`, etc. directly. Use the corresponding component from `src/components/ui`.
4. **NO Gratuitous `text-center`:** Only use `text-center` when the design explicitly calls for it. Do not use it as a crutch for layout.
5. **NO `@apply`:** `@apply` is forbidden. It creates CSS bloat and defeats the purpose of a utility-first framework. If you need to reuse styles, create a component.

## 4. Component Unification Strategy

This project follows the shadcn/ui methodology where `src/components/ui/{component}.tsx` files are the single source of truth.

### 4.1. The Methodology

We will not create wrapper components. We will follow the intended shadcn/ui workflow by directly modifying the base components. For each component (e.g., `Button`, `Card`, `Badge`):

1. **Identify the Source:** The `src/components/ui/{component}.tsx` file is the single source of truth.
2. **Merge and Enhance:** The styles, variants, and additional features from any custom components will be merged directly into the `src/components/ui` file.
3. **Consolidate Exports:** The file should export the component and any specialized variations as named exports from the same file.
4. **Update Stories:** The corresponding Storybook file will be updated to import only from the unified `src/components/ui` component.
5. **Deprecate and Delete:** Once a component has been unified, old redundant files will be deleted.

This document is the authoritative source for all technical standards. Any deviations must be documented and approved through the standard review process.